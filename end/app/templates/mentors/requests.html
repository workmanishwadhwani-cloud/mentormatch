{% extends 'base.html' %}
{% block content %}
<div class="container py-5">
  <div class="d-flex align-items-center justify-content-between mb-5">
    <h1 class="fw-bold text-dark">Session Requests</h1>
    <span class="badge bg-warning text-dark">{{ requests|length }} Pending</span>
  </div>

  {% if requests %}
    <div class="space-y-4">
      {% for r in requests %}
        <div class="card border-0 shadow-sm mb-3">
          <div class="card-body p-4">
            <div class="row align-items-center">
              <div class="col-md-8">
                <h5 class="fw-bold text-dark mb-2">{{ r.topic }}</h5>
                <p class="text-muted small mb-2">
                  <i class="fa-solid fa-user-graduate me-2"></i>From Student #{{ r.student_id }}
                </p>
                {% if r.description %}
                  <p class="text-dark mb-0" style="max-height: 80px; overflow: hidden;">
                    <small>{{ r.description }}</small>
                  </p>
                {% endif %}
              </div>
              <div class="col-md-4">
                <p class="text-muted small mb-3">
                  <i class="fa-solid fa-calendar me-1"></i>
                  {% if r.scheduled_at %}
                    {{ r.scheduled_at.strftime('%b %d, %Y') }}
                  {% else %}
                    Date not set
                  {% endif %}
                </p>
                <div class="d-grid gap-2">
                  <a href="/requests/{{ r.id }}/respond/accept" class="btn btn-success btn-sm">
                    <i class="fa-solid fa-check me-2"></i>Accept
                  </a>
                  <a href="/requests/{{ r.id }}/respond/decline" class="btn btn-outline-danger btn-sm">
                    <i class="fa-solid fa-times me-2"></i>Decline
                  </a>
                </div>
              </div>
            </div>
          </div>
        </div>
      {% endfor %}
    </div>
  {% else %}
    <div class="text-center py-5">
      <i class="fa-solid fa-inbox text-muted" style="font-size: 3rem;"></i>
      <h3 class="mt-4 text-dark">No Pending Requests</h3>
      <p class="text-muted">You're all caught up! Your incoming session requests will appear here.</p>
    </div>
  {% endif %}
</div>
{% endblock %}
